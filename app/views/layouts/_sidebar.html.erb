<aside class="hidden md:flex md:flex-col md:w-64 md:fixed md:inset-y-0 bg-white border-r border-neutral-200 print:hidden">
  <%# ロゴ %>
  <div class="px-6 py-5">
    <%= link_to root_path, class: "text-2xl font-bold text-rose-500 hover:text-rose-600" do %>
      Manabiya
    <% end %>
  </div>

  <%# ナビゲーション %>
  <nav class="flex-1 px-3 overflow-y-auto">
    <%# ホーム（自分のプロフィール） %>
    <div class="mb-2">
      <% active = current_nav_item?(member_path(current_member)) %>
      <%= link_to member_path(current_member), class: "flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium #{active ? 'bg-neutral-100 text-neutral-900' : 'text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900'}" do %>
        <%= icon("home", css_class: "size-5 shrink-0") %>
        <span>ホーム</span>
      <% end %>
    </div>

    <%# セクション %>
    <% sidebar_nav_sections.each do |section| %>
      <div class="mt-4">
        <h3 class="px-3 mb-1 text-xs font-semibold text-neutral-400 uppercase tracking-wider"><%= section[:title] %></h3>
        <ul class="space-y-0.5">
          <% section[:items].each do |item| %>
            <li>
              <% active = current_nav_item?(item[:path]) %>
              <%= link_to item[:path], class: "block px-3 py-1.5 rounded-md text-sm #{active ? 'bg-neutral-100 text-neutral-900 font-medium' : 'text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900'}" do %>
                <%= item[:label] %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </nav>

  <%# 管理メニュー（admin のみ） %>
  <% if sidebar_admin_items.any? %>
    <div class="border-t border-neutral-200 px-3 pt-4 pb-2">
      <h3 class="px-3 mb-1 text-xs font-semibold text-neutral-400 uppercase tracking-wider">管理メニュー</h3>
      <ul class="space-y-0.5">
        <% sidebar_admin_items.each do |item| %>
          <li>
            <% active = current_nav_item?(item[:path]) %>
            <%= link_to item[:path], class: "block px-3 py-1.5 rounded-md text-sm #{active ? 'bg-neutral-100 text-neutral-900 font-medium' : 'text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900'}" do %>
              <%= item[:label] %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%# メンバー情報 %>
  <div class="border-t border-neutral-200 px-3 py-4">
    <%= link_to member_path(current_member), class: "flex items-center gap-3 px-3 py-2 rounded-md hover:bg-neutral-50" do %>
      <%= image_tag(current_member.icon_url, class: "w-8 h-8 rounded-full shrink-0", size: "32x32") %>
      <span class="text-sm font-medium text-neutral-700 truncate"><%= current_member.name %></span>
    <% end %>
    <%= link_to session_path, data: { turbo_method: :delete }, class: "flex items-center gap-3 px-3 py-2 rounded-md text-sm text-neutral-500 hover:bg-neutral-50 hover:text-neutral-700" do %>
      <%= icon("arrow-right-start-on-rectangle", css_class: "size-5 shrink-0") %>
      <span>ログアウト</span>
    <% end %>
  </div>
</aside>
