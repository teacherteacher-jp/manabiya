<%# ナビゲーション %>
<nav class="flex-1 px-3 overflow-y-auto">
  <%# ホーム（自分のプロフィール） %>
  <div class="mb-2">
    <% active = current_nav_item?(member_path(current_member)) %>
    <%= link_to member_path(current_member), class: "flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium #{active ? 'bg-indigo-100 text-indigo-900' : 'text-gray-700 hover:bg-indigo-100 hover:text-indigo-900'}" do %>
      <%= icon("home", css_class: "size-5 shrink-0") %>
      <span>ホーム</span>
    <% end %>
  </div>

  <%# セクション %>
  <% sidebar_nav_sections.each do |section| %>
    <div class="mt-4">
      <h3 class="px-3 mb-1 text-xs font-semibold text-indigo-400 uppercase tracking-wider"><%= section[:title] %></h3>
      <ul class="space-y-0.5">
        <% section[:items].each do |item| %>
          <li>
            <% active = current_nav_item?(item[:path]) %>
            <%= link_to item[:path], class: "block px-3 py-1.5 rounded-md text-sm #{active ? 'bg-indigo-100 text-indigo-900 font-medium' : 'text-gray-700 hover:bg-indigo-100 hover:text-indigo-900'}" do %>
              <%= item[:label] %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
</nav>

<%# 管理メニュー（admin のみ） %>
<% if sidebar_admin_items.any? %>
  <div class="border-t border-indigo-200 px-3 pt-4 pb-2">
    <h3 class="px-3 mb-1 text-xs font-semibold text-indigo-400 uppercase tracking-wider">管理メニュー</h3>
    <ul class="space-y-0.5">
      <% sidebar_admin_items.each do |item| %>
        <li>
          <% active = current_nav_item?(item[:path]) %>
          <%= link_to item[:path], class: "block px-3 py-1.5 rounded-md text-sm #{active ? 'bg-indigo-100 text-indigo-900 font-medium' : 'text-gray-700 hover:bg-indigo-100 hover:text-indigo-900'}" do %>
            <%= item[:label] %>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

<%# メンバー情報 %>
<div class="border-t border-indigo-200 px-3 py-4">
  <%= link_to member_path(current_member), class: "flex items-center gap-3 px-3 py-2 rounded-md hover:bg-indigo-100" do %>
    <%= image_tag(current_member.icon_url, class: "w-8 h-8 rounded-full shrink-0", size: "32x32") %>
    <span class="text-sm font-medium text-gray-900 truncate"><%= current_member.name %></span>
  <% end %>
  <%= link_to session_path, data: { turbo_method: :delete }, class: "flex items-center gap-3 px-3 py-2 rounded-md text-sm text-gray-500 hover:bg-indigo-100 hover:text-gray-700" do %>
    <%= icon("arrow-right-start-on-rectangle", css_class: "size-5 shrink-0") %>
    <span>ログアウト</span>
  <% end %>
</div>
